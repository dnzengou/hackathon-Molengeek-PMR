<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
    <title>PMR map</title>

    <link href=
    "//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700|Product+Sans:400&amp;lang=en" rel=
    "stylesheet">

<!-- favicons -->

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    

    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 100%;
      }
    </style>



     <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true&amp;language=en&amp;callback=initMap&amp;signed_in=true">
        </script>


        <script type="text/javascript" src="js/fusiontips.js">
        </script>
        <script type="text/javascript" id="script">
            
            var map, layer;
            var googleApiKey = "AIzaSyCsbzuJDUEOoq-jS1HO-LUXW4qo0gW9FNs"; // Get from Google API console https://code.google.com/apis/console
      var geometryColumn = "latlon"; // geometry column name, may be Address for a points map
      var tableid = '1hZisuyJgLTO_1CrtRUFY3shwgN9A9dSVl6r227XR'; // Take from Fusion Tables About page -- initially 1bpjVp3U_Etpq_57_lz_E4thrh-qXHSDs4jI4_doX
      var defaultCenter = new google.maps.LatLng(50.8504, 4.3517); // Map centre in lat/lon for default and reset
      var defaultZoom = 11; // Zoom level for default map view and reset
      var searchZoom = 14; // Zoom level for map search
      var geocodeBias = ", , " // Can add a bias to tack onto the end of address searches. Leave blank for none
      var tooltipFields = "'Name', 'Address'" // Fields to show on tooltip
      var delay = 100; // milliseconds mouse pause before send a server query. default 300.
      var tolerance = 50; // tolerance in pixel around mouse. default is 6. want a bigger number for point maps
            
      function loadMap() {
              //NOTE: you must use the encrypted tableid
              var geocoder = new google.maps.Geocoder();
        
        layer = new google.maps.FusionTablesLayer({
                query: {
                  select: geometryColumn, // pulls geometry column name, may be Address for a points map
                  from: tableid
                },
                map: map,
        styleId: 2,
        templateId: 2
              });
              layer.enableMapTips({
                select: tooltipFields, // pulls list of columns to query, cam have only one column
                from: tableid, // pulls fusion table name referenced above
                geometryColumn: geometryColumn, // pulls geometry column name, may be Address for a points map
                suppressMapTips: false, // optional, whether to show map tips. default false
                delay: delay, // pulls milliseconds mouse pause before send a server query. default 300.
                tolerance: tolerance, // pulls tolerance in pixel around mouse. default is 6. want a bigger number for point maps
                googleApiKey: googleApiKey // pulls API key from above
              });
              map.setCenter(defaultCenter);
              map.setZoom(defaultZoom);
              addListeners();
        
                var zoomToAddress = function() {
          var address = document.getElementById('address').value;
      address = (address + geocodeBias);
          geocoder.geocode({
            address: address
          }, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
              map.setCenter(results[0].geometry.location);
              map.setZoom(searchZoom);
            } else {
              window.alert('Address could not be geocoded: ' + status);
            }
          });
        };
        google.maps.event.addDomListener(document.getElementById('search'),
            'click', zoomToAddress);
        google.maps.event.addDomListener(window, 'keypress', function(e) {
          if (e.keyCode == 13) {
            zoomToAddress();
          }
        });
        google.maps.event.addDomListener(document.getElementById('reset'),
            'click', function() {
              map.setCenter(defaultCenter);
              map.setZoom(defaultZoom);
              layer.setOptions({
                query: {
                  select: geometryColumn,
                  from: tableid
                }
              });
            });
              
            }
            
            function addListeners() {
              google.maps.event.addListener(layer, 'mouseover', function(fEvent) {
                var row = fEvent.row;
              });
            }
            
            function initialize() {
              map = new google.maps.Map(document.getElementById('map'), {
                center: new google.maps.LatLng(defaultCenter),
                zoom: defaultZoom,
                mapTypeId: google.maps.MapTypeId.ROADMAP
              });
      var transitLayer = new google.maps.TransitLayer();
  transitLayer.setMap(map);
  var bikeLayer = new google.maps.BicyclingLayer();
  bikeLayer.setMap(map);
  var trafficLayer = new google.maps.TrafficLayer();
  trafficLayer.setMap(map);
              loadMap();
            }
        </script>


        </head>

        <body onload="initialize();">


  <nav class="white" role="navigation">
    <div class="nav-wrapper container">
      <a id="logo-container" href="#" class="brand-logo"><img class="propic" src="img/logo-54x54.png" alt=""></a>
      <ul class="right hide-on-med-and-down">
        <li><a href="#about">About</a></li>
        <li><a href="#features">Features</a></li>
        <li><a href="#team">The Team</a></li>
        <li><a href="#contact">Contact</a></li>
        <li><a href="#">Map</a></li>
      </ul>

      <ul id="nav-mobile" class="side-nav">
        <li><a href="#home">Home</a></li>
        <li><a href="#features">Features</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#team">The Team</a></li>
        <li><a href="#contact">Contact</a></li>
        <li><a href="#">Map</a></li>
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>


<style>
    #menu {
        position: absolute;
        background: #FFFFFF; /*transparent;*/
        padding: 10px;
        font-family: 'Open Sans', sans-serif;
  top:140px;right:10px;
  z-index:1;
  border-radius:3px;
  width:240px;
  border:0px solid rgba(0,0,0,0.4);
    }
</style>

<br>
<br>

          
          <div id='map'></div>


  <div id="menu">
      <label><strong style="color:#3b5998;">Leaving from</strong></label>
      <input type="text" id="address" value="">
      <input type="button" id="search" value="Search">
      <input type="button" id="reset" value="Reset">
<br>
      <label><strong style="color:#3b5998;">To</strong></label>
      <input type="text" id="address" value="">

      <!--<form action="#">
  <a href="https://script.google.com/macros/s/AKfycbzTQCssIwGT64Za0h1w0CY-2-VAgXyeYI7SpFEkboH7/dev"><strong>Add a new location </strong></a>
  <input type="image" src="assets/img/share.png" alt="submit">
</form>-->

</div>




    <div class="footer-copyright">
      <div class="container">
      Inspired by <a class="brown-text text-lighten-3" href="http://materializecss.com">Materialize</a> Designed by <a class="brown-text text-lighten-3" href="http://desireyavro.com">molengeek-team</a>
      </div>
    </div>
  </footer>


  <!--  Scripts-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>

  </body>
</html>
